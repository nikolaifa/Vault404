[Unit]
Description=Vault for managing secrets
Requires=network-online.target 
After=network-online.target
ConditionFileNotEmpty=<%= scope['vault::destination_dir'] %>vault.json

[Service]
User=vault
Group=vault
ExecStart=<%= scope['vault::destination_dir'] %>vault server -config=<%= scope['vault::destination_dir'] %>vault.json
Environment=GOMAXPROCS=2
LimitMEMLOCK=infinity
KillMode=process
Restart=on-failure
RestartSec=42s
KillSignal=SIGTERM
ExecReload=/bin/kill -HUP $MAINPID

[Install]
WantedBy=multi-user.target


